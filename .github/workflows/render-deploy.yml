name: Render Backend Deploy Hook

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy-backend:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render Deploy
        env:
          HOOK_URL: ${{ secrets.RENDER_DEPLOY_HOOK_URL }}
        run: |
          if [ -z "$HOOK_URL" ]; then
            echo "Render deploy hook URL missing. Set RENDER_DEPLOY_HOOK_URL secret in repo settings."
            exit 1
          fi
          echo "Calling Render deploy hook..."
          curl -fsSL -X POST "$HOOK_URL"
          echo "Render deploy triggered."